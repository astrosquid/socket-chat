<!doctype html>
<html>

<head>
	<title>Socket.IO Login</title>
</head>

<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script type="text/javascript">
	$(function() {
		$('form').submit(function(){
	    const gotoChat = 'chat?username=';
	    const username = $('#username').val();
	    const password = $('#password').val();

	    $('#username').val('');
	    $('#password').val('');

	    const userdata = {
	    	"username": username,
	    	"password": password
	    };

	    $.ajax({
	    	url: '/checkUserLogin/',
	    	data: userdata,
	    	type: 'POST',
	    	success: function() {
	    		console.log('great!');
	    		userLogin(username);
	    	},
	    	error: function(xhr, status, error) {
				  alert(xhr.responseText);
				}
	    });

	    return false;
		});

		function userLogin(username) 
		{
			console.log('moving to chat...');
			window.location = '/chat?username=' + username;
		}
	});

</script>

<body>
	<form action="">
		<h1>Login to socket-chat</h1>
		<label for="username">Username:</label><input type="text" id="username" />
		<label for="password">Password:</label><input type="password" id="password" />
		<button type="submit">Submit</button>
	</form>
</body>

</html>